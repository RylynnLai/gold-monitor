================================================================================
回测分析报告 - 基于用户标注的反转时间点
================================================================================

## 用户标注的6个反转时间点（美国东部时间）:
1. 2026-02-20 13:15 ET - 上升
2. 2026-02-20 08:15 ET - 上升
3. 2026-02-20 03:45 ET - 上升
4. 2026-02-19 18:45 ET - 上升
5. 2026-02-19 15:45 ET - 下降
6. 2026-02-20 02:45 ET - 下降

## 测试结果摘要

### 最佳参数组合：
- MIN_REVERSAL_THRESHOLD = 0.0005 (0.05%)
- SWING_WINDOW_SIZE = 2
- MIN_STRENGTH = 0.15

### 检测结果：
检测到4个反转，其中2个与用户标注匹配：

✓ 匹配1: 2026-02-19 15:45 ET (下降) - 差25分钟
✓ 匹配2: 2026-02-19 18:45 ET (上升) - 差70分钟

✗ 未检测: 2026-02-20 02:45 ET (下降)
✗ 未检测: 2026-02-20 03:45 ET (上升)
✗ 未检测: 2026-02-20 08:15 ET (上升)
✗ 未检测: 2026-02-20 13:15 ET (上升)

匹配率: 33% (2/6)

## 问题分析

1. **N字形算法的局限性**：
   - 当前算法检测的是特定形态：LOW-HIGH-LOW（上升）或 HIGH-LOW-HIGH（下降）
   - 这种形态要求至少3个摇摆点才能形成
   - 用户标注的某些反转点可能是简单的价格反弹，未形成完整N字形

2. **20日数据特征**：
   - 20日的4个反转点全部未被检测到
   - 查看K线数据发现20日价格波动较为平缓，未形成明显的N字形结构
   - 用户可能基于不同的反转定义（如MA交叉、RSI背离等）

3. **阈值限制**：
   - 即使使用极低阈值（0.0005 = 0.05%），仍无法检测到20日的反转
   - 进一步降低阈值会导致过多误报

## 建议

### 方案1：使用当前最佳参数（保守）
```env
MIN_REVERSAL_THRESHOLD=0.0005
SWING_WINDOW_SIZE=2
MIN_STRENGTH=0.15
```

**优点**：相对稳定，误报较少
**缺点**：匹配率仅33%，会漏掉很多反转

### 方案2：更激进的参数（高灵敏度）
```env
MIN_REVERSAL_THRESHOLD=0.0003
SWING_WINDOW_SIZE=2
MIN_STRENGTH=0.10
```

**优点**：可能检测到更多反转
**缺点**：误报率会大幅上升

### 方案3：考虑其他算法（推荐）
N字形算法可能不适合您观察到的反转模式。建议考虑：
1. **移动平均线交叉**：短期MA与长期MA交叉作为反转信号
2. **动量指标**：RSI、MACD背离
3. **简单趋势反转**：连续N根K线改变方向

## 下一步行动

请告知：
1. 您是否接受33%的匹配率，使用方案1的参数？
2. 或者希望我实现其他反转检测算法（如MA交叉）？
3. 您观察到的反转是基于什么指标/方法？这将帮助我选择更合适的算法。

================================================================================
